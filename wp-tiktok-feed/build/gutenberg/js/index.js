/*! For license information please see index.js.LICENSE.txt */
(()=>{var e={500:(e,t)=>{var n;!function(){"use strict";var o={}.hasOwnProperty;function l(){for(var e="",t=0;t<arguments.length;t++){var n=arguments[t];n&&(e=r(e,a(n)))}return e}function a(e){if("string"==typeof e||"number"==typeof e)return e;if("object"!=typeof e)return"";if(Array.isArray(e))return l.apply(null,e);if(e.toString!==Object.prototype.toString&&!e.toString.toString().includes("[native code]"))return e.toString();var t="";for(var n in e)o.call(e,n)&&e[n]&&(t=r(t,n));return t}function r(e,t){return t?e?e+" "+t:e+t:e}e.exports?(l.default=l,e.exports=l):void 0===(n=function(){return l}.apply(t,[]))||(e.exports=n)}()}},t={};function n(o){var l=t[o];if(void 0!==l)return l.exports;var a=t[o]={exports:{}};return e[o](a,a.exports,n),a.exports}n.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return n.d(t,{a:t}),t},n.d=(e,t)=>{for(var o in t)n.o(t,o)&&!n.o(e,o)&&Object.defineProperty(e,o,{enumerable:!0,get:t[o]})},n.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),(()=>{"use strict";const e=window.wp.element,t=window.wp.i18n,o=window.wp.blocks,l=window.wp.blockEditor;function a(){return a=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)({}).hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e},a.apply(null,arguments)}const r=window.qlttf.store;var i=n(500),s=n.n(i);const c=window.wp.components,d=window.wp.compose,u=n=>{const{attributes:o,setAttributes:a}=n,[i,u]=(0,e.useState)(o.hashtag),[_,m]=(0,e.useState)(o.username),[p,f]=(0,e.useState)(o.region),[k,g]=(0,e.useState)(o.limit),h=(0,d.useDebounce)(e=>{a({hashtag:e})},1e3),b=(0,d.useDebounce)(e=>{a({username:e})},1e3),v=(0,d.useDebounce)(e=>{a({region:e})},1e3),w=(0,d.useDebounce)(e=>{a({limit:e})},1e3);(0,e.useEffect)(()=>{h(i)},[i,h]),(0,e.useEffect)(()=>{b(_)},[_,b]),(0,e.useEffect)(()=>{v(p)},[p,v]),(0,e.useEffect)(()=>{w(k)},[k,w]);const{accounts:E}=(0,r.useAccountsEntities)(),y=qlttf_gutenberg.image_url,C=E?.find(e=>e.open_id===o.open_id),[x,N]=(0,e.useState)(!1);return(0,e.createElement)(l.InspectorControls,{key:"inspector"},(0,e.createElement)(c.PanelBody,{initialOpen:!0,title:(0,t.__)("Cache","wp-tiktok-feed")},(0,e.createElement)(c.Button,{variant:"secondary",onClick:async()=>{confirm((0,t.__)("You are about to reset the cache of this feed.","wp-tiktok-feed"))&&(N(!0),await(0,r.clearFeedCache)({method:"POST",data:{feedSettings:o}}),N(!1))}},(0,t.__)("Clear cache","wp-tiktok-feed")),x&&(0,e.createElement)("span",{style:{visibility:"visible",position:"absolute"},className:"spinner"})),(0,e.createElement)(c.PanelBody,{initialOpen:!0,title:(0,t.__)("General","wp-tiktok-feed")},(0,e.createElement)(c.SelectControl,{label:(0,t.__)("Feed","wp-tiktok-feed"),value:o.source,onChange:e=>a({source:e}),options:[{value:"account",label:(0,t.__)("Account","wp-tiktok-feed")},{value:"username",label:(0,t.__)("Username","wp-tiktok-feed")},{value:"hashtag",label:(0,t.__)("Hashtag","wp-tiktok-feed")},{value:"trending",label:(0,t.__)("Trending","wp-tiktok-feed")}]}),"account"===o.source&&(0,e.createElement)(c.SelectControl,{label:(0,t.__)("Account","wp-tiktok-feed"),help:(0,t.__)("Please select an account","wp-tiktok-feed"),value:o.open_id,onChange:e=>a({open_id:e}),options:E?.map(e=>({value:e.open_id,label:e.nickname||e.username}))}),"hashtag"===o.source&&(0,e.createElement)(c.TextControl,{label:(0,t.__)("Hashtag","wp-tiktok-feed"),help:(0,t.__)("Please enter a hashtag","wp-tiktok-feed"),value:i,onChange:function(e){u(e)}}),"username"===o.source&&(0,e.createElement)(c.TextControl,{label:(0,t.__)("Username","wp-tiktok-feed"),help:(0,t.__)("Please enter a tiktok account name","wp-tiktok-feed"),value:_,onChange:function(e){m(e)}}),"trending"===o.source&&(0,e.createElement)(c.TextControl,{label:(0,t.__)("Region","wp-tiktok-feed"),help:(0,e.createElement)("a",{target:"_blank",rel:"noreferrer noopener",href:"https://www.iso.org/obp/ui/#search/code/"},(0,t.__)("Please enter a region country in Alpha-2 standard. You can find more information about it here.","wp-tiktok-feed")),value:p,onChange:function(e){f(e)}}),(0,e.createElement)(e.Fragment,null,(0,e.createElement)("ul",{className:"qlttf-list-videos"},["gallery","masonry","carousel","carousel-vertical","highlight","highlight-square"].map((t,n)=>(0,e.createElement)("li",{key:n,className:s()("qlttf-modal-image",o.layout===t&&"active","masonry"!==t&&"gallery"!==t&&"qlttf-premium-field"),onClick:()=>a({layout:t})},(0,e.createElement)("span",null,t.replace("-"," ")),(0,e.createElement)("img",{alt:t,src:`${y}/${t}.png`}))))),(0,e.createElement)(c.RangeControl,{label:(0,t.__)("Limit","wp-tiktok-feed"),help:(0,t.__)("Number of videos to display","wp-tiktok-feed"),value:k,onChange:function(e){g(e)},min:1,max:33}),(0,e.createElement)(c.RangeControl,{label:(0,t.__)("Columns","wp-tiktok-feed"),help:(0,t.__)("Number of videos in a row","wp-tiktok-feed"),value:o.columns,onChange:e=>a({columns:e}),min:1,max:20}),["highlight","highlight-square"].includes(o.layout)&&(0,e.createElement)(e.Fragment,null,(0,e.createElement)(c.TextControl,{label:(0,t.__)(" highlight by tag","wp-tiktok-feed"),help:(0,t.__)("Highlight feeds items with this tags","wp-tiktok-feed"),value:o.highlight.tag,onChange:e=>a({highlight:{...o.highlight,tag:e}})}),(0,e.createElement)(c.TextControl,{label:(0,t.__)(" highlight by id","wp-tiktok-feed"),help:(0,t.__)(" highlight by id","wp-tiktok-feed"),value:o.highlight.id,onChange:e=>a({highlight:{...o.highlight,id:e}})}),(0,e.createElement)(c.TextControl,{label:(0,t.__)(" highlight by position","wp-tiktok-feed"),help:(0,t.__)("Highlight feeds items in this positions","wp-tiktok-feed"),value:o.highlight.position,onChange:e=>a({highlight:{...o.highlight,position:e}})})),(0,e.createElement)(c.RangeControl,{label:(0,t.__)("Spacing","wp-tiktok-feed"),help:(0,t.__)("Add spacing between videos","wp-tiktok-feed"),value:o.video.spacing,onChange:e=>a({video:{...o.video,spacing:e}}),min:0,max:50})),["carousel","carousel-vertical"].includes(o.layout)&&(0,e.createElement)(c.PanelBody,{initialOpen:!1,title:(0,t.__)("Carousel","wp-tiktok-feed")},(0,e.createElement)(c.ToggleControl,{label:(0,t.__)("Autoplay","wp-tiktok-feed"),help:(0,t.__)("Autoplay carousel items","wp-tiktok-feed"),checked:!!o.carousel.autoplay,onChange:e=>a({carousel:{...o.carousel,autoplay:e}})}),o.carousel.autoplay&&(0,e.createElement)(c.RangeControl,{label:(0,t.__)("Autoplay Interval","wp-tiktok-feed"),help:(0,t.__)("Move to the next picture after a specified time interval","wp-tiktok-feed"),value:o.carousel.autoplay_interval,onChange:e=>a({carousel:{...o.carousel,autoplay_interval:e}}),min:1e3,max:3e5,step:100}),(0,e.createElement)(c.ToggleControl,{label:(0,t.__)("Navigation","wp-tiktok-feed"),help:(0,t.__)("Display navigation arrows","wp-tiktok-feed"),checked:!!o.carousel.navarrows,onChange:e=>a({carousel:{...o.carousel,navarrows:e}})}),o.carousel.navarrows&&(0,e.createElement)(c.BaseControl,{label:(0,t.__)("Navigation color","wp-tiktok-feed"),help:(0,t.__)("Change navigation arrows color","wp-tiktok-feed")},(0,e.createElement)(l.ColorPalette,{value:o.carousel.navarrows_color,onChange:e=>a({carousel:{...o.carousel,navarrows_color:e}})})),(0,e.createElement)(c.ToggleControl,{label:(0,t.__)("Pagination","wp-tiktok-feed"),help:(0,t.__)("Display pagination dots","wp-tiktok-feed"),checked:!!o.carousel.pagination,onChange:e=>a({carousel:{...o.carousel,pagination:e}})}),o.carousel.pagination&&(0,e.createElement)(c.BaseControl,{label:(0,t.__)("Pagination color","wp-tiktok-feed"),help:(0,t.__)("Change pagination dots color","wp-tiktok-feed")},(0,e.createElement)(l.ColorPalette,{value:o.carousel.pagination_color,onChange:e=>a({carousel:{...o.carousel,pagination_color:e}})}))),(0,e.createElement)(c.PanelBody,{initialOpen:!1,title:(0,t.__)("Profile","wp-tiktok-feed")},(0,e.createElement)(c.ToggleControl,{label:(0,t.__)("Display","wp-tiktok-feed"),className:"qlttf-premium-field",help:(0,t.__)("Display user profile or tag info","wp-tiktok-feed"),checked:!!o.profile.display,onChange:e=>a({profile:{...o.profile,display:e}})}),o.profile.display&&(0,e.createElement)(e.Fragment,null,(0,e.createElement)(c.TextControl,{label:(0,t.__)("Nickname","wp-tiktok-feed"),help:(0,t.__)("Profile Nickname","wp-tiktok-feed"),value:o.profile.nickname,onChange:e=>{a({profile:{...o.profile,nickname:e}})}}),(0,e.createElement)(c.TextControl,{label:(0,t.__)("Username","wp-tiktok-feed"),help:(0,t.__)("Profile username","wp-tiktok-feed"),value:o.profile.username,onChange:e=>{a({profile:{...o.profile,username:e}})}}),(0,e.createElement)(c.TextControl,{label:(0,t.__)("Link Text","wp-tiktok-feed"),help:(0,t.__)("Link text here","wp-tiktok-feed"),value:o.profile.link_text,placeholder:"TikTok",onChange:e=>{a({profile:{...o.profile,link_text:e}})}}),(0,e.createElement)(c.TextareaControl,{label:(0,t.__)("Biography","wp-tiktok-feed"),help:(0,t.__)("Profile description here","wp-tiktok-feed"),value:o.profile.biography,onChange:e=>{a({profile:{...o.profile,biography:e}})}}),(0,e.createElement)("div",{style:{display:"flex",flexDirection:"column",alignItems:"center"}},(0,e.createElement)("img",{alt:"",width:"150",height:"150",src:o.profile.avatar||C.avatar||"http://2.gravatar.com/avatar/b642b4217b34b1e8d3bd915fc65c4452?s=150&d=mm&r=g"}),(0,e.createElement)(l.MediaUpload,{onSelect:e=>{a({profile:{...o.profile,avatar:e.url}})},allowedTypes:["image"],value:o.profile.avatar,render:({open:n})=>(0,e.createElement)("div",null,(0,e.createElement)(c.Button,{style:{margin:"15px 5px 15px 0"},variant:"secondary",onClick:n},(0,t.__)("Upload","wp-tiktok-feed")),(0,e.createElement)(c.Button,{style:{margin:"15px 0"},variant:"secondary",disabled:!o.profile.avatar||o.profile.avatar===C.avatar,onClick:()=>{a({profile:{...o.profile,avatar:C.avatar||""}})}},"×"))})))),(0,e.createElement)(c.PanelBody,{initialOpen:!1,title:(0,t.__)("Box","wp-tiktok-feed")},(0,e.createElement)(c.ToggleControl,{label:(0,t.__)("Display","wp-tiktok-feed"),className:"qlttf-premium-field",help:(0,t.__)("Display the TikTok Feed inside a customizable box","wp-tiktok-feed"),checked:!!o.box.display,onChange:e=>a({box:{...o.box,display:e}})}),o.box.display&&(0,e.createElement)(e.Fragment,null,(0,e.createElement)(c.RangeControl,{label:(0,t.__)("Padding","wp-tiktok-feed"),className:"qlttf-premium-field",help:(0,t.__)("Add padding to the box","wp-tiktok-feed"),value:o.box.padding,onChange:e=>a({box:{...o.box,padding:e}}),min:0,max:300}),(0,e.createElement)(c.RangeControl,{label:(0,t.__)("Radius","wp-tiktok-feed"),help:(0,t.__)("Add radius to the box","wp-tiktok-feed"),className:"qlttf-premium-field",value:o.box.radius,onChange:e=>a({box:{...o.box,radius:e}}),min:0,max:1e3}),(0,e.createElement)(c.BaseControl,{label:(0,t.__)("Background","wp-tiktok-feed"),help:(0,t.__)("Change background color in box","wp-tiktok-feed"),className:"qlttf-premium-field"},(0,e.createElement)(l.ColorPalette,{value:o.box.background,onChange:e=>a({box:{...o.box,background:e}})})),(0,e.createElement)(c.BaseControl,{label:(0,t.__)("Text color","wp-tiktok-feed"),className:"qlttf-premium-field",help:(0,t.__)("Change text color in box","wp-tiktok-feed")},(0,e.createElement)(l.ColorPalette,{value:o.box.text_color,onChange:e=>a({box:{...o.box,text_color:e}})})))),(0,e.createElement)(c.PanelBody,{initialOpen:!1,title:(0,t.__)("Video","wp-tiktok-feed")},(0,e.createElement)(c.ToggleControl,{label:(0,t.__)("Lazy load","wp-tiktok-feed"),help:(0,t.__)("Defers video lazy","wp-tiktok-feed"),checked:!!o.lazy,onChange:e=>a({lazy:e})}),(0,e.createElement)(c.ToggleControl,{label:(0,t.__)("Mask","wp-tiktok-feed"),help:(0,t.__)("Display mask on hover","wp-tiktok-feed"),checked:!!o.mask.display,onChange:e=>a({mask:{...o.mask,display:e}})}),o.mask.display&&(0,e.createElement)(e.Fragment,null,(0,e.createElement)(c.BaseControl,{label:(0,t.__)("Mask background","wp-tiktok-feed"),help:(0,t.__)("Change background color in mask","wp-tiktok-feed")},(0,e.createElement)(l.ColorPalette,{value:o.mask.background,onChange:e=>a({mask:{...o.mask,background:e}})})),(0,e.createElement)(c.ToggleControl,{label:(0,t.__)("Likes","wp-tiktok-feed"),help:(0,t.__)("Display likes count in mask","wp-tiktok-feed"),checked:!!o.mask.likes_count,onChange:e=>a({mask:{...o.mask,likes_count:e}})}),(0,e.createElement)(c.ToggleControl,{label:(0,t.__)("Comments","wp-tiktok-feed"),help:(0,t.__)("Display comments count in mask","wp-tiktok-feed"),checked:!!o.mask.comments_count,onChange:e=>a({mask:{...o.mask,comments_count:e}})}))),(0,e.createElement)(c.PanelBody,{initialOpen:!1,title:(0,t.__)("Card","wp-tiktok-feed")},(0,e.createElement)(c.ToggleControl,{label:(0,t.__)("Display","wp-tiktok-feed"),className:"qlttf-premium-field",help:(0,t.__)("Display card in video","wp-tiktok-feed"),checked:!!o.card.display,onChange:e=>a({card:{...o.card,display:e}})}),o.card.display&&(0,e.createElement)(e.Fragment,null,(0,e.createElement)(c.RangeControl,{label:(0,t.__)("Radius","wp-tiktok-feed"),help:(0,t.__)("Add radius to the card","wp-tiktok-feed"),className:"qlttf-premium-field",value:o.card.radius,onChange:e=>a({card:{...o.card,radius:e}}),min:0,max:1e3}),(0,e.createElement)(c.RangeControl,{label:(0,t.__)("Font size","wp-tiktok-feed"),help:(0,t.__)("Change font size in cards","wp-tiktok-feed"),className:"qlttf-premium-field",value:o.card.font_size,onChange:e=>a({card:{...o.card,font_size:e}}),min:8,max:36}),(0,e.createElement)(c.BaseControl,{label:(0,t.__)("Background","wp-tiktok-feed"),className:"qlttf-premium-field",help:(0,t.__)("Change background color in cards","wp-tiktok-feed")},(0,e.createElement)(l.ColorPalette,{value:o.card.background,onChange:e=>a({card:{...o.card,background:e}})})),(0,e.createElement)(c.BaseControl,{label:(0,t.__)("Background hover","wp-tiktok-feed"),className:"qlttf-premium-field",help:(0,t.__)("Change background color hover in cards","wp-tiktok-feed")},(0,e.createElement)(l.ColorPalette,{value:o.card.background_hover,onChange:e=>a({card:{...o.card,background_hover:e}})})),(0,e.createElement)(c.BaseControl,{label:(0,t.__)("Text color","wp-tiktok-feed"),className:"qlttf-premium-field",help:(0,t.__)("Change text color","wp-tiktok-feed")},(0,e.createElement)(l.ColorPalette,{value:o.card.text_color,onChange:e=>a({card:{...o.card,text_color:e}})})),(0,e.createElement)(c.RangeControl,{label:(0,t.__)("Padding","wp-tiktok-feed"),help:(0,t.__)("Add padding in cards","wp-tiktok-feed"),className:"qlttf-premium-field",value:o.card.padding,onChange:e=>a({card:{...o.card,padding:e}}),min:0,max:20}),(0,e.createElement)(c.ToggleControl,{label:(0,t.__)("Likes","wp-tiktok-feed"),className:"qlttf-premium-field",help:(0,t.__)("Display likes count in cards","wp-tiktok-feed"),checked:!!o.card.likes_count,onChange:e=>a({card:{...o.card,likes_count:e}})}),(0,e.createElement)(c.ToggleControl,{label:(0,t.__)("Comments","wp-tiktok-feed"),className:"qlttf-premium-field",help:(0,t.__)("Display comments count in cards","wp-tiktok-feed"),checked:!!o.card.comments_count,onChange:e=>a({card:{...o.card,comments_count:e}})}),(0,e.createElement)(c.ToggleControl,{label:(0,t.__)("Description","wp-tiktok-feed"),className:"qlttf-premium-field",help:(0,t.__)("Display description in cards","wp-tiktok-feed"),checked:!!o.card.video_description,onChange:e=>a({card:{...o.card,video_description:e}})}),!!o.card.video_description&&(0,e.createElement)(c.RangeControl,{label:(0,t.__)("Length","wp-tiktok-feed"),help:(0,t.__)("Limit the length of the description in the card","wp-tiktok-feed"),className:"qlttf-premium-field",value:o.card.max_word_count,onChange:e=>a({card:{...o.card,max_word_count:e}}),min:1,max:100}),(0,e.createElement)(c.SelectControl,{label:(0,t.__)("Text align","tiktok-feed"),help:(0,t.__)("Align description in card","tiktok-feed"),className:"qlttf-premium-field",value:o.card.text_align||"",onChange:e=>a({card:{...o.card,text_align:e}}),options:[{value:"left",label:(0,t.__)("Left","tiktok-feed")},{value:"center",label:(0,t.__)("Center","tiktok-feed")},{value:"right",label:(0,t.__)("Right","tiktok-feed")}]}))),(0,e.createElement)(c.PanelBody,{initialOpen:!1,title:(0,t.__)("Modal","wp-tiktok-feed")},(0,e.createElement)(c.ToggleControl,{label:(0,t.__)("Display","wp-tiktok-feed"),help:(0,t.__)("Display Modal by clicking on video","wp-tiktok-feed"),checked:!!o.modal.display,onChange:e=>a({modal:{...o.modal,display:e}})}),o.modal.display&&(0,e.createElement)(e.Fragment,null,(0,e.createElement)(c.ToggleControl,{label:(0,t.__)("Profile","wp-tiktok-feed"),help:(0,t.__)("Display user profile or tag info","wp-tiktok-feed"),checked:!!o.modal.profile,onChange:e=>a({modal:{...o.modal,profile:e}})}),(0,e.createElement)(c.ToggleControl,{label:(0,t.__)("Description","wp-tiktok-feed"),help:(0,t.__)("Display description in the sidebar","wp-tiktok-feed"),checked:!!o.modal.video_description,onChange:e=>a({modal:{...o.modal,video_description:e}})}),(0,e.createElement)(c.ToggleControl,{label:(0,t.__)("Likes","wp-tiktok-feed"),help:(0,t.__)("Display likes count in sidebar","wp-tiktok-feed"),checked:!!o.modal.likes_count,onChange:e=>a({modal:{...o.modal,likes_count:e}})}),(0,e.createElement)(c.ToggleControl,{label:(0,t.__)("Comments","wp-tiktok-feed"),help:(0,t.__)("Display comments count in sidebar","wp-tiktok-feed"),checked:!!o.modal.comments_count,onChange:e=>a({modal:{...o.modal,comments_count:e}})}),(0,e.createElement)(c.ToggleControl,{label:(0,t.__)("Date","wp-tiktok-feed"),help:(0,t.__)("Display video date","wp-tiktok-feed"),checked:!!o.modal.date,onChange:e=>a({modal:{...o.modal,date:e}})}),"account"===o.source&&(0,e.createElement)("p",{className:"form-field"},(0,e.createElement)("span",{className:"notice error",style:{marginleft:"0",marginright:"0",paddingtop:" 10px",paddingbottom:" 10px",display:" flex",justifycontent:" left",alignitems:" center"}},(0,e.createElement)("small",null,(0,t.__)("Due to Tiktok limitations, controls and autoplay options are not available in account source.","wp-tiktok-feed")))),(0,e.createElement)(c.ToggleControl,{label:(0,t.__)("Controls","wp-tiktok-feed"),help:(0,t.__)("Display video controls","wp-tiktok-feed"),checked:o.modal.controls,disabled:"account"===o.source,onChange:e=>a({modal:{...o.modal,controls:e}})}),(0,e.createElement)(c.ToggleControl,{label:(0,t.__)("Autoplay","wp-tiktok-feed"),help:(0,t.__)("Video autoplay when modal is open.","wp-tiktok-feed"),checked:o.modal.autoplay,disabled:"account"===o.source,onChange:e=>a({modal:{...o.modal,autoplay:e}})}),(0,e.createElement)(c.SelectControl,{label:(0,t.__)("Text align","wp-tiktok-feed"),help:(0,t.__)("Align description in sidebar","wp-tiktok-feed"),value:o.modal.align||"",onChange:e=>a({modal:{...o.modal,align:e}}),options:[{value:"left",label:(0,t.__)("Left","wp-tiktok-feed")},{value:"center",label:(0,t.__)("Center","wp-tiktok-feed")},{value:"right",label:(0,t.__)("Right","wp-tiktok-feed")}]}))),(0,e.createElement)(c.PanelBody,{initialOpen:!1,title:(0,t.__)("Button","wp-tiktok-feed")},(0,e.createElement)(c.ToggleControl,{label:(0,t.__)("Display","wp-tiktok-feed"),help:(0,t.__)("Display the button to open tikTok site link","wp-tiktok-feed"),checked:!!o.button.display,onChange:e=>a({button:{...o.button,display:e}})}),o.button.display&&(0,e.createElement)(e.Fragment,null,(0,e.createElement)(c.TextControl,{label:(0,t.__)("Text","wp-tiktok-feed"),help:(0,t.__)("Change button text","wp-tiktok-feed"),placeholder:"TikTok",value:o.button.text,onChange:e=>a({button:{...o.button,text:e}})}),(0,e.createElement)(c.BaseControl,{label:(0,t.__)("Text color","wp-tiktok-feed"),help:(0,t.__)("Change color text in button","wp-tiktok-feed")},(0,e.createElement)(l.ColorPalette,{value:o.button.text_color,onChange:e=>a({button:{...o.button,text_color:e}})})),(0,e.createElement)(c.BaseControl,{label:(0,t.__)("Background","wp-tiktok-feed"),help:(0,t.__)("Change background color in button","wp-tiktok-feed")},(0,e.createElement)(l.ColorPalette,{value:o.button.background,onChange:e=>a({button:{...o.button,background:e}})})),(0,e.createElement)(c.BaseControl,{label:(0,t.__)("Background hover","wp-tiktok-feed"),help:(0,t.__)("Change background hover in button","wp-tiktok-feed")},(0,e.createElement)(l.ColorPalette,{value:o.button.background_hover,onChange:e=>a({button:{...o.button,background_hover:e}})})))),["account","username","hashtag"].includes(o.source)&&(0,e.createElement)(c.PanelBody,{initialOpen:!1,title:(0,t.__)("Button load more","wp-tiktok-feed")},(0,e.createElement)(c.ToggleControl,{label:(0,t.__)("Display","wp-tiktok-feed"),help:(0,t.__)("Display the button to load more feeds","wp-tiktok-feed"),className:"qlttf-premium-field",checked:!!o.button_load.display,onChange:e=>a({button_load:{...o.button_load,display:e}})}),o.button_load.display&&(0,e.createElement)(e.Fragment,null,(0,e.createElement)(c.TextControl,{label:(0,t.__)("Text","wp-tiktok-feed"),help:(0,t.__)("Change button text","wp-tiktok-feed"),className:"qlttf-premium-field",value:o.button_load.text,onChange:e=>a({button_load:{...o.button_load,text:e}})}),(0,e.createElement)(c.BaseControl,{label:(0,t.__)("Text color","wp-tiktok-feed"),help:(0,t.__)("Change color text in button","wp-tiktok-feed"),className:"qlttf-premium-field"},(0,e.createElement)(l.ColorPalette,{value:o.button_load.text_color,onChange:e=>a({button_load:{...o.button_load,text_color:e}})})),(0,e.createElement)(c.BaseControl,{label:(0,t.__)("Background","wp-tiktok-feed"),help:(0,t.__)("Change background color in button","wp-tiktok-feed"),className:"qlttf-premium-field"},(0,e.createElement)(l.ColorPalette,{value:o.button_load.background,onChange:e=>a({button_load:{...o.button_load,background:e}})})),(0,e.createElement)(c.BaseControl,{label:(0,t.__)("Background hover","wp-tiktok-feed"),help:(0,t.__)("Change background hover in button","wp-tiktok-feed"),className:"qlttf-premium-field"},(0,e.createElement)(l.ColorPalette,{value:o.button_load.background_hover,onChange:e=>a({button_load:{...o.button_load,background_hover:e}})})))))},_=(0,e.createContext)({}),m=()=>(0,e.useContext)(_),p=(e,t)=>{switch(t.type){case"SET_CURRENT_FEED_INDEX":case"SET_IS_OPEN":case"SET_IS_IMAGE_LOAD":return{...e,...t.payload}}},f=t=>{const{children:n}=t,[o,l]=(0,e.useReducer)(p,{currentFeedIndex:0,setIsOpen:!1});return(0,e.createElement)(_.Provider,{value:{...o,setCurrentFeedIndex:e=>{o.currentFeedIndex!=e&&l({type:"SET_CURRENT_FEED_INDEX",payload:{currentFeedIndex:e}})},setIsOpen:e=>{o.isOpen!=e&&l({type:"SET_IS_OPEN",payload:{isOpen:e}})}}},n)},k=(_.Consumer,(0,e.createElement)("svg",{width:"34px",height:"39px",viewBox:"0 0 34 39",version:"1.1",xmlns:"http://www.w3.org/2000/svg"},(0,e.createElement)("g",{stroke:"none",strokeWidth:"1",fill:"none",fillRule:"evenodd"},(0,e.createElement)("g",{id:"logo",fillRule:"nonzero"},(0,e.createElement)("path",{d:"M14,15.5986129 L14,14.1133768 C13.4492134,14.040368 12.8937601,14.0024884 12.3374825,14 C5.53458031,14 0,19.1804477 0,25.5469912 C0,29.4523859 2.08560208,32.9095062 5.26712374,35 C3.13682443,32.8679456 1.95248926,30.057585 1.95420355,27.138627 C1.95420355,20.862785 7.33129202,15.7451306 14,15.5986129",id:"路径",fill:"#00F2EA"}),(0,e.createElement)("path",{d:"M14.3270124,32 C17.2025642,32 19.5483859,29.7265698 19.6552148,26.893337 L19.6649265,1.60131615 L24.3141914,1.60131615 C24.2149367,1.07323659 24.1646956,0.537213101 24.1641012,0 L17.8144025,0 L17.8038079,25.2928983 C17.6978619,28.1252536 15.3511573,30.3978064 12.4764884,30.3978064 C11.6134296,30.3981458 10.7633314,30.1891169 10,29.7888676 C10.9999544,31.1753424 12.6105704,31.998378 14.3270124,32 M32.9991171,10.1861256 L32.9991171,8.7804771 C31.2904862,8.78205509 29.6185303,8.28804731 28.1882845,7.35903482 C29.4422255,8.79389849 31.1305958,9.78588899 33,10.1861256",id:"形状",fill:"#00F2EA"}),(0,e.createElement)("path",{d:"M28,7.71784336 C26.6016465,6.13450916 25.8314253,4.10280973 25.8323547,2 L24.1350558,2 C24.579153,4.34872233 25.9758497,6.41501163 28,7.71784336 M12.3253083,20.0652472 C9.38563022,20.0686094 7.00339763,22.426024 7,25.3350766 C7.00190968,27.2938688 8.10083201,29.0902144 9.85378743,30 C9.1988984,29.1062913 8.84622242,28.0306091 8.84615385,26.9266592 C8.84906616,24.0172662 11.2314406,21.6593213 14.1714621,21.6559582 C14.7201996,21.6559582 15.2460364,21.7457353 15.7428068,21.9000125 L15.7428068,15.4996887 C15.2222255,15.4267223 14.6972334,15.3888647 14.1714621,15.3863778 C14.0789783,15.3863778 13.988256,15.3916075 13.896653,15.3933508 L13.896653,20.3093015 C13.388489,20.1492295 12.8585935,20.0669285 12.3253083,20.0652472",id:"形状",fill:"#FF004F"}),(0,e.createElement)("path",{d:"M32.1532084,11.0008735 L32.1532084,15.8838834 C28.868262,15.8838834 25.8255034,14.841767 23.3402168,13.072877 L23.3402168,25.8412053 C23.3402168,32.2179445 18.1107231,37.4058149 11.6817395,37.4058149 C9.19733366,37.4058149 6.89346776,36.6283768 5,35.3093527 C7.2006955,37.6633081 10.2910883,39.0007866 13.5276504,39 C19.956634,39 25.1870084,33.8121292 25.1870084,27.4362636 L25.1870084,14.6679353 C27.7544407,16.4991162 30.8377082,17.4825603 34,17.4789417 L34,11.1947963 C33.3659085,11.1947963 32.7494306,11.1266613 32.1532084,11",id:"路径",fill:"#FF004F"}),(0,e.createElement)("path",{d:"M23.9786547,25.4190568 L23.9786547,12.6326996 C26.6066739,14.4666805 29.7629082,15.4515361 33,15.4476752 L33,10.5577705 C31.0913787,10.1583421 29.3677274,9.16907377 28.0877076,7.7384212 C26.0159757,6.43090073 24.5864469,4.3571751 24.1319103,2 L19.384593,2 L19.3746765,27.2149377 C19.2655946,30.0386608 16.8702998,32.3051622 13.934103,32.3051622 C12.1814976,32.3034007 10.5369778,31.4829054 9.51583447,30.1007687 C7.7213232,29.1879457 6.59619217,27.3850884 6.59406171,25.4190568 C6.59753921,22.4995348 9.03577081,20.1336362 12.0445517,20.1302619 C12.6052869,20.1302619 13.1434845,20.2194873 13.6528339,20.3751945 L13.6528339,15.4415519 C7.20167505,15.5885114 2,20.7215992 2,27.0163673 C2,30.0605298 3.2188327,32.8317673 5.20484485,34.9014479 C7.20695433,36.2690564 9.59610241,37.0020908 12.0445517,37 C18.6255271,37 23.9786547,31.8047999 23.9786547,25.4190568",id:"路径",fill:"#FFFFFF"}))))),g=(0,e.createElement)("svg",{width:"12px",height:"14px",viewBox:"0 0 29 32",version:"1.1",xmlns:"http://www.w3.org/2000/svg"},(0,e.createElement)("g",{id:"页面1",stroke:"none",strokeWidth:"1",fill:"none",fillRule:"evenodd"},(0,e.createElement)("g",{id:"编组-2",transform:"translate(0.979236, 0.000000)",fillRule:"nonzero"},(0,e.createElement)("path",{d:"M10.7907645,12.33 L10.7907645,11.11 C10.3672629,11.0428887 9.93950674,11.0061284 9.51076448,10.9999786 C5.35996549,10.9912228 1.68509679,13.6810205 0.438667694,17.6402658 C-0.807761399,21.5995112 0.663505842,25.9093887 4.07076448,28.28 C1.51848484,25.5484816 0.809799545,21.5720834 2.26126817,18.1270053 C3.71273679,14.6819273 7.05329545,12.4115428 10.7907645,12.33 L10.7907645,12.33 Z",id:"路径",fill:"#25F4EE"}),(0,e.createElement)("path",{d:"M11.0207645,26.15 C13.3415287,26.1468776 15.2491662,24.3185414 15.3507645,22 L15.3507645,1.31 L19.1307645,1.31 C19.0536068,0.877682322 19.0167818,0.439130992 19.0207645,0 L13.8507645,0 L13.8507645,20.67 C13.764798,23.0003388 11.8526853,24.846212 9.52076448,24.85 C8.82390914,24.844067 8.13842884,24.6726969 7.52076448,24.35 C8.33268245,25.4749154 9.63346203,26.1438878 11.0207645,26.15 Z",id:"路径",fill:"#25F4EE"}),(0,e.createElement)("path",{d:"M26.1907645,8.33 L26.1907645,7.18 C24.79964,7.18047625 23.4393781,6.76996242 22.2807645,6 C23.2964446,7.18071769 24.6689622,7.99861177 26.1907645,8.33 L26.1907645,8.33 Z",id:"路径",fill:"#25F4EE"}),(0,e.createElement)("path",{d:"M22.2807645,6 C21.1394675,4.70033161 20.5102967,3.02965216 20.5107645,1.3 L19.1307645,1.3 C19.4909812,3.23268519 20.6300383,4.93223067 22.2807645,6 L22.2807645,6 Z",id:"路径",fill:"#FE2C55"}),(0,e.createElement)("path",{d:"M9.51076448,16.17 C7.51921814,16.1802178 5.79021626,17.544593 5.31721201,19.4791803 C4.84420777,21.4137677 5.74860956,23.4220069 7.51076448,24.35 C6.55594834,23.0317718 6.42106871,21.2894336 7.16162883,19.8399613 C7.90218896,18.3904889 9.39306734,17.4787782 11.0207645,17.48 C11.4547752,17.4854084 11.8857908,17.5527546 12.3007645,17.68 L12.3007645,12.42 C11.8769919,12.3565056 11.4492562,12.3230887 11.0207645,12.32 L10.7907645,12.32 L10.7907645,16.32 C10.3736368,16.2081544 9.94244934,16.1576246 9.51076448,16.17 Z",id:"路径",fill:"#FE2C55"}),(0,e.createElement)("path",{d:"M26.1907645,8.33 L26.1907645,12.33 C23.61547,12.3250193 21.107025,11.5098622 19.0207645,10 L19.0207645,20.51 C19.0097352,25.7544158 14.7551919,30.0000116 9.51076448,30 C7.56312784,30.0034556 5.66240321,29.4024912 4.07076448,28.28 C6.72698674,31.1368108 10.8608257,32.0771989 14.4914706,30.6505586 C18.1221155,29.2239183 20.5099375,25.7208825 20.5107645,21.82 L20.5107645,11.34 C22.604024,12.8399663 25.1155724,13.6445013 27.6907645,13.64 L27.6907645,8.49 C27.1865925,8.48839535 26.6839313,8.43477816 26.1907645,8.33 Z",id:"路径",fill:"#FE2C55"}),(0,e.createElement)("path",{d:"M19.0207645,20.51 L19.0207645,10 C21.1134087,11.5011898 23.6253623,12.3058546 26.2007645,12.3 L26.2007645,8.3 C24.6792542,7.97871265 23.3034403,7.17147491 22.2807645,6 C20.6300383,4.93223067 19.4909812,3.23268519 19.1307645,1.3 L15.3507645,1.3 L15.3507645,22 C15.2751521,23.8467664 14.0381991,25.4430201 12.268769,25.9772302 C10.4993389,26.5114403 8.58570942,25.8663815 7.50076448,24.37 C5.73860956,23.4420069 4.83420777,21.4337677 5.30721201,19.4991803 C5.78021626,17.564593 7.50921814,16.2002178 9.50076448,16.19 C9.934903,16.1938693 10.3661386,16.2612499 10.7807645,16.39 L10.7807645,12.39 C7.0223379,12.4536691 3.65653929,14.7319768 2.20094561,18.1976761 C0.745351938,21.6633753 1.47494493,25.6617476 4.06076448,28.39 C5.66809542,29.4755063 7.57158782,30.0378224 9.51076448,30 C14.7551919,30.0000116 19.0097352,25.7544158 19.0207645,20.51 Z",id:"路径",fill:"#000000"})))),h=(0,e.createElement)("svg",{width:"16",height:"16",viewBox:"0 0 16 16",fill:"none",xmlns:"http:www.w3.org/2000/svg"},(0,e.createElement)("path",{d:"M12.3171 7.57538C12.6317 7.77102 12.6317 8.22898 12.3171 8.42462L4.01401 13.5871C3.68095 13.7942 3.25 13.5547 3.25 13.1625V2.83747C3.25 2.44528 3.68095 2.20577 4.01401 2.41285L12.3171 7.57538Z",stroke:"white",strokeWidth:"1.5"})),b=({href:t,className:n,children:o,onClick:l,disabled:a})=>(0,e.createElement)("a",{href:t,target:"blank",onClick:l,className:s()("tiktok-feed__button",n,a&&"tiktok-feed__button--disabled")},o);function v(e,t){const{hashtag:n,source:o}=e,{username:l}=t;switch(o){case"account":case"username":return`https://www.tiktok.com/@${l}`;case"hashtag":return`https://www.tiktok.com/tag/${n}`;default:return"https://www.tiktok.com"}}const w=({userProfile:t={},feedSettings:n={},onClick:o,createTime:l})=>{const a=!!n?.button?.display,r=!!n?.button_load?.display;return(0,e.createElement)("div",{className:"tiktok-feed__actions"},a&&(0,e.createElement)(b,{href:v(n,t),target:"blank",className:"tiktok-feed__button--follow"},k,n.button.text),r&&["account","username","hashtag"].includes(n.source)&&(0,e.createElement)(b,{className:"tiktok-feed__button--load",onClick:o,disabled:0===l},k,n.button_load.text))},E=()=>{const t=window?.qlttf_frontend?.settings?.spinner_image_url;return(0,e.createElement)("div",{className:"tiktok-feed__spinner",style:t?{backgroundImage:`url(${t})`}:{}})},y=({errorUserProfile:t,errorUserVideoList:n})=>(0,e.createElement)("div",{className:"tiktok-feed__alert"},(0,e.createElement)("ul",null,t&&(0,e.createElement)("li",null,(0,e.createElement)("b",null,t.error),(0,e.createElement)("p",null,t.message)),n&&(0,e.createElement)("li",null,(0,e.createElement)("b",null,n.error),(0,e.createElement)("p",null,n.message)))),C=(0,e.memo)(({feedSettings:t,userProfile:n})=>(0,e.createElement)("div",{className:"tiktok-feed__profile"},(0,e.createElement)("div",{className:"avatar"},(0,e.createElement)("img",{src:t.profile.avatar?t.profile.avatar:n.avatar,alt:t.profile.nickname?t.profile.nickname:n.nickname})),(0,e.createElement)("div",{className:"info"},(0,e.createElement)("div",null,(0,e.createElement)("span",{className:"user"},"@",t.profile.username?t.profile.username:n.username),!!t.profile.nickname&&(0,e.createElement)(e.Fragment,null,(0,e.createElement)("span",{className:"separator"},"•"),(0,e.createElement)("span",{className:"user"},t.profile.nickname)),(0,e.createElement)("span",{className:"separator"},"•"),(0,e.createElement)("a",{className:"follow",href:t.profile.username?`https://www.tiktok.com/@${t.profile.username}`:n.link,target:"_blank",rel:"noopener noreferrer"},t.profile.link_text?t.profile.link_text:"Follow"),(0,e.createElement)("div",{className:"biography"},t.profile.biography?t.profile.biography:n.biography))))),x=({feedSettings:t,feedItem:n})=>(0,e.createElement)(e.Fragment,null,(0,e.createElement)("div",{className:"tiktok-feed-item__video-mask"}),(0,e.createElement)("div",{className:"tiktok-feed-item__video-mask--content"},!!t.mask.likes_count&&(0,e.createElement)("span",{className:"tiktok-feed-item__likes_count--mask"},(0,e.createElement)("i",{className:"qlttf-icon-heart tiktok-feed-item__icon-heart"}),n.likes_count),!!t.mask.comments_count&&(0,e.createElement)("span",{className:"tiktok-feed-item__comments_count--mask"},(0,e.createElement)("i",{className:"qlttf-icon-comment tiktok-feed-item__icon-bubble_chat"}),n.comments_count)));window.React;const N="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHhtbG5zOnhsaW5rPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5L3hsaW5rIiB3aWR0aD0iMjRweCIgaGVpZ2h0PSIyNHB4IiBwcmVzZXJ2ZUFzcGVjdFJhdGlvPSJ4TWlkWU1pZCBtZWV0IiB2aWV3Qm94PSIwIDAgMjAgMjAiIHN0eWxlPSItbXMtdHJhbnNmb3JtOiByb3RhdGUoMzYwZGVnKTsgLXdlYmtpdC10cmFuc2Zvcm06IHJvdGF0ZSgzNjBkZWcpOyB0cmFuc2Zvcm06IHJvdGF0ZSgzNjBkZWcpOyI+PHBhdGggZmlsbD0iI2ZmZiIgZD0iTTE2IDE3SDJsMy41LTQuNWwyLjUgM2wzLTMuODFBMiAyIDAgMCAxIDEwIDEwVjZIMmEyIDIgMCAwIDAtMiAydjEwYTIgMiAwIDAgMCAyIDJoMTRhMiAyIDAgMCAwIDItMnYtNmgtNS43NXoiLz48cGF0aCBmaWxsPSIjZmZmIiBkPSJNMTkgNGgtLjVWMi41YTIuNSAyLjUgMCAwIDAtNSAwVjRIMTNhMSAxIDAgMCAwLTEgMXY0YTEgMSAwIDAgMCAxIDFoNmExIDEgMCAwIDAgMS0xVjVhMSAxIDAgMCAwLTEtMXptLTMgNGExIDEgMCAxIDEgMS0xYTEgMSAwIDAgMS0xIDF6bTEuNS00aC0zVjIuNzVDMTQuNSAyIDE0LjUgMSAxNiAxczEuNSAxIDEuNSAxLjc1eiIvPjwvc3ZnPgo=",S=({feedItem:t,feedSettings:n})=>{const o=t.cover_image_url.includes(".heic"),l=(()=>{const e=navigator.userAgent;return!(!e.includes("Safari")||e.includes("Chrome"))&&!(void 0!==window.chrome||!0===navigator.webdriver)})();return(0,e.createElement)("div",{className:"tiktok-feed-item__video-wrap"},o&&!l?(0,e.createElement)("video",{width:t.width?t.width:180,height:t.height?t.height:180,alt:"TikTok",className:"tiktok-feed-item__video",loading:n.lazy&&"lazy",src:t.cover_image_url?t.cover_image_url:N}):(0,e.createElement)("img",{width:t.width?t.width:180,height:t.height?t.height:180,alt:"TikTok",className:"tiktok-feed-item__video",loading:n.lazy&&"lazy",src:t.cover_image_url?t.cover_image_url:N}),n.mask.display&&(0,e.createElement)(x,{feedItem:t,feedSettings:n}),(0,e.createElement)("a",{className:"tiktok-feed-item__icon tiktok-feed-item__icon--views_count",href:t.share_url,target:"_blank",rel:"noreferrer"},h,(0,e.createElement)("span",null,t.views_count)))},L=e=>{const t=e.highlight.tag?.split(" ");return t.map(e=>e.includes("#")?e:e.split(" ").map(e=>"#"+e).join(" "))},T=(0,e.memo)(({feedSettings:t,feedItem:n})=>(0,e.createElement)("div",{className:"tiktok-feed-item__video-card"},(0,e.createElement)("div",{className:"tiktok-feed-item__info"},(0,e.createElement)("div",{className:"tiktok-feed-item__date"},n.date),(0,e.createElement)("div",{className:"tiktok-feed-item__icons"},!!t.card.likes_count&&(0,e.createElement)("span",{className:"tiktok-feed-item__likes_count"},(0,e.createElement)("i",{className:"qlttf-icon-heart"}),n.likes_count),!!t.card.comments_count&&(0,e.createElement)("span",{className:"tiktok-feed-item__comments_count"},(0,e.createElement)("i",{className:"qlttf-icon-comment"}),n.comments_count))),!!t.card.video_description&&(0,e.createElement)("p",{className:"tiktok-feed-item__video_description"},((e,t)=>{const n=e.replace(/<[^>]+>/g,"");let o=n;return o=e.match("[぀-ヿ㐀-䶿一-鿿豈-﫿ｦ-ﾟ]")?n.split("",t).join(""):n.split(" ",t).join(" "),o.length<e.length?`${o}...`:o})(n.video_description,t.card.max_word_count)))),I=({index:t,length:n,feedSettings:o,feedItem:l,onClick:a,isLink:r})=>{const i=function(e,t,n){if(!["highlight","highlight-square"].includes(e.layout))return!1;if(!e?.highlight)return!1;for(const o in e.highlight){const l=e.highlight[o].split(",").map(e=>e.toString().trim());switch(o){case"position":if(l.includes(n.toString()))return!0;break;case"id":if(l.includes(t.id))return!0;break;case"tag":const o=t.tags?.filter(t=>L(e).includes(t)).length;if(o)return!0}}return!1}(o,l,t),c=function(e){return["carousel","carousel-vertical"].includes(e.layout)}(o);return(0,e.createElement)("div",{href:r?l.share_url:void 0,target:r?"_blank":void 0,rel:r?"noopener noreferrer":void 0,className:s()("tiktok-feed-item",c&&"swiper-slide",i&&"tiktok-feed-item--highlight",`tiktok-feed-item--cols-${o.columns}`),"data-elementor-open-lightbox":"no","data-feed-item-index":t,onClick:a,onKeyDown:r?void 0:e=>{"Enter"!==e.key&&" "!==e.key||(e.preventDefault(),a(e))},tabIndex:r?void 0:0,role:r?void 0:"button","aria-label":(()=>{let e=l.video_description?`: ${l.video_description.replace(/<[^>]*>?/gm,"")}`:"";return e.length>100&&(e=e.substring(0,100)+"..."),`Tiktok Video${e}`})()},(0,e.createElement)("div",{className:"tiktok-feed-item__wrap"},(0,e.createElement)(S,{index:t,feedItem:l,length:n,feedSettings:o}),o.card.display&&(0,e.createElement)(T,{feedItem:l,feedSettings:o})))},q=function(t,n){const o=(0,e.useRef)();return(0,e.useCallback)(e=>{e?o.current=t(e):o.current&&o.current()},n)},P=(0,e.memo)(({currentFeedItem:t,feedSettings:n})=>{const[o,l]=(0,e.useState)(!0),a=q(e=>{const{ownerDocument:t}=e,n=t.createElement("script");return n.src="https://www.tiktok.com/embed.js",n.async=!0,t.body.appendChild(n),()=>{t.body.removeChild(n)}});return(0,e.createElement)("section",{ref:a,className:s()("tiktok-feed-modal__video-container",t.embed_html?"tiktok-feed-modal__video-container--iframe":"tiktok-feed-modal__video-container--video")},t.embed_html?(0,e.createElement)("div",{className:"tiktok-feed-modal__iframe-container",dangerouslySetInnerHTML:{__html:t.embed_html},style:{height:(r=t.height,r>2e3?"600px":"560px")}}):(0,e.createElement)(e.Fragment,null,(0,e.createElement)("video",{autoPlay:!!n.modal.autoplay,className:"tiktok-feed-modal__video",controls:!!n.modal.controls,controlsList:"nodownload",onLoadStart:()=>l(!0),onLoadedData:()=>l(!1),style:!!o&&{display:"none"}||{},src:t.video_url,type:"video/mp4"}),!!o&&(0,e.createElement)("div",{className:"tiktok-feed-modal__spinner"},(0,e.createElement)("img",{alt:"TikTok",className:"tiktok-feed-modal__spinner--img",src:t.cover_image_url?t.cover_image_url:N}),(0,e.createElement)(E,null))));var r});var D,M,F,A,$,B,R,O,z,U,j,V={},Z=[],W=/acit|ex(?:s|g|n|p|$)|rph|grid|ows|mnc|ntw|ine[ch]|zoo|^ord|itera/i,H=Array.isArray;function G(e,t){for(var n in t)e[n]=t[n];return e}function J(e){e&&e.parentNode&&e.parentNode.removeChild(e)}function Y(e,t,n,o,l){var a={type:e,props:t,key:n,ref:o,__k:null,__:null,__b:0,__e:null,__c:null,constructor:void 0,__v:null==l?++F:l,__i:-1,__u:0};return null==l&&null!=M.vnode&&M.vnode(a),a}function X(e){return e.children}function Q(e,t){this.props=e,this.context=t}function K(e,t){if(null==t)return e.__?K(e.__,e.__i+1):null;for(var n;t<e.__k.length;t++)if(null!=(n=e.__k[t])&&null!=n.__e)return n.__e;return"function"==typeof e.type?K(e):null}function ee(e){var t,n;if(null!=(e=e.__)&&null!=e.__c){for(e.__e=e.__c.base=null,t=0;t<e.__k.length;t++)if(null!=(n=e.__k[t])&&null!=n.__e){e.__e=e.__c.base=n.__e;break}return ee(e)}}function te(e){(!e.__d&&(e.__d=!0)&&A.push(e)&&!ne.__r++||$!=M.debounceRendering)&&(($=M.debounceRendering)||B)(ne)}function ne(){for(var e,t,n,o,l,a,r,i=1;A.length;)A.length>i&&A.sort(R),e=A.shift(),i=A.length,e.__d&&(n=void 0,l=(o=(t=e).__v).__e,a=[],r=[],t.__P&&((n=G({},o)).__v=o.__v+1,M.vnode&&M.vnode(n),de(t.__P,n,o,t.__n,t.__P.namespaceURI,32&o.__u?[l]:null,a,null==l?K(o):l,!!(32&o.__u),r),n.__v=o.__v,n.__.__k[n.__i]=n,_e(a,n,r),n.__e!=l&&ee(n)));ne.__r=0}function oe(e,t,n,o,l,a,r,i,s,c,d){var u,_,m,p,f,k,g,h=o&&o.__k||Z,b=t.length;for(s=le(n,t,h,s,b),u=0;u<b;u++)null!=(m=n.__k[u])&&(_=-1==m.__i?V:h[m.__i]||V,m.__i=u,k=de(e,m,_,l,a,r,i,s,c,d),p=m.__e,m.ref&&_.ref!=m.ref&&(_.ref&&fe(_.ref,null,m),d.push(m.ref,m.__c||p,m)),null==f&&null!=p&&(f=p),(g=!!(4&m.__u))||_.__k===m.__k?s=ae(m,s,e,g):"function"==typeof m.type&&void 0!==k?s=k:p&&(s=p.nextSibling),m.__u&=-7);return n.__e=f,s}function le(e,t,n,o,l){var a,r,i,s,c,d=n.length,u=d,_=0;for(e.__k=new Array(l),a=0;a<l;a++)null!=(r=t[a])&&"boolean"!=typeof r&&"function"!=typeof r?(s=a+_,(r=e.__k[a]="string"==typeof r||"number"==typeof r||"bigint"==typeof r||r.constructor==String?Y(null,r,null,null,null):H(r)?Y(X,{children:r},null,null,null):null==r.constructor&&r.__b>0?Y(r.type,r.props,r.key,r.ref?r.ref:null,r.__v):r).__=e,r.__b=e.__b+1,i=null,-1!=(c=r.__i=re(r,n,s,u))&&(u--,(i=n[c])&&(i.__u|=2)),null==i||null==i.__v?(-1==c&&(l>d?_--:l<d&&_++),"function"!=typeof r.type&&(r.__u|=4)):c!=s&&(c==s-1?_--:c==s+1?_++:(c>s?_--:_++,r.__u|=4))):e.__k[a]=null;if(u)for(a=0;a<d;a++)null!=(i=n[a])&&!(2&i.__u)&&(i.__e==o&&(o=K(i)),ke(i,i));return o}function ae(e,t,n,o){var l,a;if("function"==typeof e.type){for(l=e.__k,a=0;l&&a<l.length;a++)l[a]&&(l[a].__=e,t=ae(l[a],t,n,o));return t}e.__e!=t&&(o&&(t&&e.type&&!t.parentNode&&(t=K(e)),n.insertBefore(e.__e,t||null)),t=e.__e);do{t=t&&t.nextSibling}while(null!=t&&8==t.nodeType);return t}function re(e,t,n,o){var l,a,r,i=e.key,s=e.type,c=t[n],d=null!=c&&!(2&c.__u);if(null===c&&null==e.key||d&&i==c.key&&s==c.type)return n;if(o>(d?1:0))for(l=n-1,a=n+1;l>=0||a<t.length;)if(null!=(c=t[r=l>=0?l--:a++])&&!(2&c.__u)&&i==c.key&&s==c.type)return r;return-1}function ie(e,t,n){"-"==t[0]?e.setProperty(t,null==n?"":n):e[t]=null==n?"":"number"!=typeof n||W.test(t)?n:n+"px"}function se(e,t,n,o,l){var a,r;e:if("style"==t)if("string"==typeof n)e.style.cssText=n;else{if("string"==typeof o&&(e.style.cssText=o=""),o)for(t in o)n&&t in n||ie(e.style,t,"");if(n)for(t in n)o&&n[t]==o[t]||ie(e.style,t,n[t])}else if("o"==t[0]&&"n"==t[1])a=t!=(t=t.replace(O,"$1")),r=t.toLowerCase(),t=r in e||"onFocusOut"==t||"onFocusIn"==t?r.slice(2):t.slice(2),e.l||(e.l={}),e.l[t+a]=n,n?o?n.u=o.u:(n.u=z,e.addEventListener(t,a?j:U,a)):e.removeEventListener(t,a?j:U,a);else{if("http://www.w3.org/2000/svg"==l)t=t.replace(/xlink(H|:h)/,"h").replace(/sName$/,"s");else if("width"!=t&&"height"!=t&&"href"!=t&&"list"!=t&&"form"!=t&&"tabIndex"!=t&&"download"!=t&&"rowSpan"!=t&&"colSpan"!=t&&"role"!=t&&"popover"!=t&&t in e)try{e[t]=null==n?"":n;break e}catch(e){}"function"==typeof n||(null==n||!1===n&&"-"!=t[4]?e.removeAttribute(t):e.setAttribute(t,"popover"==t&&1==n?"":n))}}function ce(e){return function(t){if(this.l){var n=this.l[t.type+e];if(null==t.t)t.t=z++;else if(t.t<n.u)return;return n(M.event?M.event(t):t)}}}function de(e,t,n,o,l,a,r,i,s,c){var d,u,_,m,p,f,k,g,h,b,v,w,E,y,C,x,N,S=t.type;if(null!=t.constructor)return null;128&n.__u&&(s=!!(32&n.__u),a=[i=t.__e=n.__e]),(d=M.__b)&&d(t);e:if("function"==typeof S)try{if(g=t.props,h="prototype"in S&&S.prototype.render,b=(d=S.contextType)&&o[d.__c],v=d?b?b.props.value:d.__:o,n.__c?k=(u=t.__c=n.__c).__=u.__E:(h?t.__c=u=new S(g,v):(t.__c=u=new Q(g,v),u.constructor=S,u.render=ge),b&&b.sub(u),u.props=g,u.state||(u.state={}),u.context=v,u.__n=o,_=u.__d=!0,u.__h=[],u._sb=[]),h&&null==u.__s&&(u.__s=u.state),h&&null!=S.getDerivedStateFromProps&&(u.__s==u.state&&(u.__s=G({},u.__s)),G(u.__s,S.getDerivedStateFromProps(g,u.__s))),m=u.props,p=u.state,u.__v=t,_)h&&null==S.getDerivedStateFromProps&&null!=u.componentWillMount&&u.componentWillMount(),h&&null!=u.componentDidMount&&u.__h.push(u.componentDidMount);else{if(h&&null==S.getDerivedStateFromProps&&g!==m&&null!=u.componentWillReceiveProps&&u.componentWillReceiveProps(g,v),!u.__e&&null!=u.shouldComponentUpdate&&!1===u.shouldComponentUpdate(g,u.__s,v)||t.__v==n.__v){for(t.__v!=n.__v&&(u.props=g,u.state=u.__s,u.__d=!1),t.__e=n.__e,t.__k=n.__k,t.__k.some(function(e){e&&(e.__=t)}),w=0;w<u._sb.length;w++)u.__h.push(u._sb[w]);u._sb=[],u.__h.length&&r.push(u);break e}null!=u.componentWillUpdate&&u.componentWillUpdate(g,u.__s,v),h&&null!=u.componentDidUpdate&&u.__h.push(function(){u.componentDidUpdate(m,p,f)})}if(u.context=v,u.props=g,u.__P=e,u.__e=!1,E=M.__r,y=0,h){for(u.state=u.__s,u.__d=!1,E&&E(t),d=u.render(u.props,u.state,u.context),C=0;C<u._sb.length;C++)u.__h.push(u._sb[C]);u._sb=[]}else do{u.__d=!1,E&&E(t),d=u.render(u.props,u.state,u.context),u.state=u.__s}while(u.__d&&++y<25);u.state=u.__s,null!=u.getChildContext&&(o=G(G({},o),u.getChildContext())),h&&!_&&null!=u.getSnapshotBeforeUpdate&&(f=u.getSnapshotBeforeUpdate(m,p)),x=d,null!=d&&d.type===X&&null==d.key&&(x=me(d.props.children)),i=oe(e,H(x)?x:[x],t,n,o,l,a,r,i,s,c),u.base=t.__e,t.__u&=-161,u.__h.length&&r.push(u),k&&(u.__E=u.__=null)}catch(e){if(t.__v=null,s||null!=a)if(e.then){for(t.__u|=s?160:128;i&&8==i.nodeType&&i.nextSibling;)i=i.nextSibling;a[a.indexOf(i)]=null,t.__e=i}else{for(N=a.length;N--;)J(a[N]);ue(t)}else t.__e=n.__e,t.__k=n.__k,e.then||ue(t);M.__e(e,t,n)}else null==a&&t.__v==n.__v?(t.__k=n.__k,t.__e=n.__e):i=t.__e=pe(n.__e,t,n,o,l,a,r,s,c);return(d=M.diffed)&&d(t),128&t.__u?void 0:i}function ue(e){e&&e.__c&&(e.__c.__e=!0),e&&e.__k&&e.__k.forEach(ue)}function _e(e,t,n){for(var o=0;o<n.length;o++)fe(n[o],n[++o],n[++o]);M.__c&&M.__c(t,e),e.some(function(t){try{e=t.__h,t.__h=[],e.some(function(e){e.call(t)})}catch(e){M.__e(e,t.__v)}})}function me(e){return"object"!=typeof e||null==e||e.__b&&e.__b>0?e:H(e)?e.map(me):G({},e)}function pe(e,t,n,o,l,a,r,i,s){var c,d,u,_,m,p,f,k=n.props,g=t.props,h=t.type;if("svg"==h?l="http://www.w3.org/2000/svg":"math"==h?l="http://www.w3.org/1998/Math/MathML":l||(l="http://www.w3.org/1999/xhtml"),null!=a)for(c=0;c<a.length;c++)if((m=a[c])&&"setAttribute"in m==!!h&&(h?m.localName==h:3==m.nodeType)){e=m,a[c]=null;break}if(null==e){if(null==h)return document.createTextNode(g);e=document.createElementNS(l,h,g.is&&g),i&&(M.__m&&M.__m(t,a),i=!1),a=null}if(null==h)k===g||i&&e.data==g||(e.data=g);else{if(a=a&&D.call(e.childNodes),k=n.props||V,!i&&null!=a)for(k={},c=0;c<e.attributes.length;c++)k[(m=e.attributes[c]).name]=m.value;for(c in k)if(m=k[c],"children"==c);else if("dangerouslySetInnerHTML"==c)u=m;else if(!(c in g)){if("value"==c&&"defaultValue"in g||"checked"==c&&"defaultChecked"in g)continue;se(e,c,null,m,l)}for(c in g)m=g[c],"children"==c?_=m:"dangerouslySetInnerHTML"==c?d=m:"value"==c?p=m:"checked"==c?f=m:i&&"function"!=typeof m||k[c]===m||se(e,c,m,k[c],l);if(d)i||u&&(d.__html==u.__html||d.__html==e.innerHTML)||(e.innerHTML=d.__html),t.__k=[];else if(u&&(e.innerHTML=""),oe("template"==t.type?e.content:e,H(_)?_:[_],t,n,o,"foreignObject"==h?"http://www.w3.org/1999/xhtml":l,a,r,a?a[0]:n.__k&&K(n,0),i,s),null!=a)for(c=a.length;c--;)J(a[c]);i||(c="value","progress"==h&&null==p?e.removeAttribute("value"):null!=p&&(p!==e[c]||"progress"==h&&!p||"option"==h&&p!=k[c])&&se(e,c,p,k[c],l),c="checked",null!=f&&f!=e[c]&&se(e,c,f,k[c],l))}return e}function fe(e,t,n){try{if("function"==typeof e){var o="function"==typeof e.__u;o&&e.__u(),o&&null==t||(e.__u=e(t))}else e.current=t}catch(e){M.__e(e,n)}}function ke(e,t,n){var o,l;if(M.unmount&&M.unmount(e),(o=e.ref)&&(o.current&&o.current!=e.__e||fe(o,null,t)),null!=(o=e.__c)){if(o.componentWillUnmount)try{o.componentWillUnmount()}catch(e){M.__e(e,t)}o.base=o.__P=null}if(o=e.__k)for(l=0;l<o.length;l++)o[l]&&ke(o[l],t,n||"function"!=typeof e.type);n||J(e.__e),e.__c=e.__=e.__e=void 0}function ge(e,t,n){return this.constructor(e,n)}D=Z.slice,M={__e:function(e,t,n,o){for(var l,a,r;t=t.__;)if((l=t.__c)&&!l.__)try{if((a=l.constructor)&&null!=a.getDerivedStateFromError&&(l.setState(a.getDerivedStateFromError(e)),r=l.__d),null!=l.componentDidCatch&&(l.componentDidCatch(e,o||{}),r=l.__d),r)return l.__E=l}catch(t){e=t}throw e}},F=0,Q.prototype.setState=function(e,t){var n;n=null!=this.__s&&this.__s!=this.state?this.__s:this.__s=G({},this.state),"function"==typeof e&&(e=e(G({},n),this.props)),e&&G(n,e),null!=e&&this.__v&&(t&&this._sb.push(t),te(this))},Q.prototype.forceUpdate=function(e){this.__v&&(this.__e=!0,e&&this.__h.push(e),te(this))},Q.prototype.render=X,A=[],B="function"==typeof Promise?Promise.prototype.then.bind(Promise.resolve()):setTimeout,R=function(e,t){return e.__v.__b-t.__v.__b},ne.__r=0,O=/(PointerCapture)$|Capture$/i,z=0,U=ce(!1),j=ce(!0);const he=({currentFeedItem:t,userProfile:n,feedItemsNumber:o,feedSettings:l})=>{const{currentFeedIndex:a}=m(),r=!!t.profile;return(0,e.createElement)("section",{className:"tiktok-feed-modal__video-info"},!!l.modal.profile&&(0,e.createElement)("div",{className:"tiktok-feed-modal__profile"},(()=>{const o=r?t.profile.avatar:n.avatar,l=o&&o.includes(".heic"),a=(()=>{const e=navigator.userAgent;return!(!e.includes("Safari")||e.includes("Chrome"))&&!(void 0!==window.chrome||!0===navigator.webdriver)})();return o?(0,e.createElement)(X,null,l&&!a&&(0,e.createElement)("video",{width:"40",height:"40",alt:"Profile Avatar",src:o,style:{borderRadius:"50%",objectFit:"cover"},onError:e=>{e.target.style.display="none";const t=e.target.parentNode.querySelector("img");t&&(t.style.display="block")}}),(0,e.createElement)("img",{src:o,alt:"Profile Avatar",style:{borderRadius:"50%",objectFit:"cover",width:"40px",height:"40px",display:l&&!a?"none":"block"},onError:e=>{e.target.style.display="none";const t=e.target.parentNode.parentNode.querySelector('div[style*="background-color: #f0f0f0"]');t&&(t.style.display="flex")}})):(0,e.createElement)("div",{style:{width:"40px",height:"40px",borderRadius:"50%",backgroundColor:"#f0f0f0",display:"flex",alignItems:"center",justifyContent:"center"}},"👤")})(),(0,e.createElement)("div",null,(0,e.createElement)("span",null,r?t.profile.nickname:n.nickname),(0,e.createElement)("a",{href:r?t.profile.link:n.link,title:r?t.profile.nickname:n.nickname,target:"_blank",rel:"noopener noreferrer"},`@${r?t.profile.username:n.username}`))),(0,e.createElement)("div",{className:"tiktok-feed-modal__icons"},(0,e.createElement)("span",{className:"tiktok-feed-modal__counter"},`${a+1} / ${o}`),(0,e.createElement)("a",{className:"tiktok-feed-modal__link",href:t.share_url,target:"_blank",rel:"noopener noreferrer"},g,"TikTok")),!!l.modal.video_description&&(0,e.createElement)("p",{className:"tiktok-feed-modal__video_description",dangerouslySetInnerHTML:{__html:t.video_description}}),(0,e.createElement)("div",{className:"tiktok-feed-modal__info"},!!l.modal.likes_count&&(0,e.createElement)("span",{className:"tiktok-feed-modal__likes_count"},(0,e.createElement)("i",{className:"qlttf-icon-heart"}),t.likes_count),!!l.modal.date&&(0,e.createElement)("span",{className:"tiktok-feed-modal__date"},t.date),!!l.modal.comments_count&&(0,e.createElement)("span",{className:"tiktok-feed-modal__comments_count"},(0,e.createElement)("i",{className:"qlttf-icon-comment"}),t.comments_count)))},be=({isPrevious:t,classname:n,onClick:o})=>(0,e.createElement)("span",{className:s()("tiktok-feed-modal__button-arrow",n,t&&"qlttf-icon-prev",!t&&"qlttf-icon-next"),onClick:o}),ve=({onClick:t})=>(0,e.createElement)("span",{className:"tiktok-feed-modal__button-close",onClick:t}),we=({children:t,id:n})=>{const{isOpen:o,setIsOpen:l}=m();return o?(0,e.createElement)("div",{className:"tiktok-feed-modal__overlay",id:n,onClick:()=>l(!1)},t):null},Ee=({feedListItems:t,feedSettings:n,userProfile:o})=>{const{currentFeedIndex:l,setCurrentFeedIndex:a}=m(),{setIsOpen:r}=m(),[i,s]=(0,e.useState)(t[l]),c=!!t[l-1],d=!!t[l+1];return(0,e.useEffect)(()=>{s(t[l])},[l]),(0,e.createElement)(we,{id:`tiktok-feed-modal-${n.id}`},(0,e.createElement)("div",{className:"tiktok-feed-modal",onClick:e=>e.stopPropagation()},(0,e.createElement)("div",{className:"tiktok-feed-modal__options"},(0,e.createElement)("div",{className:"tiktok-feed-modal__options--arrows"},(0,e.createElement)(be,{isPrevious:!0,onClick:e=>{e.stopPropagation(),a(c?l-1:t.length-1)}}),(0,e.createElement)(be,{next:!0,onClick:e=>{e.stopPropagation(),a(d?l+1:0)}})),(0,e.createElement)(ve,{onClick:()=>r(!1)})),(0,e.createElement)("section",{className:"tiktok-feed-modal__body"},(0,e.createElement)(P,{feedSettings:n,currentFeedItem:i}),(0,e.createElement)(he,{feedSettings:n,currentFeedItem:i,userProfile:o,feedItemsNumber:t.length}))))},ye=(e,t,n="")=>null==t||""===t?"":`${e}: ${t}${n};`,Ce=(0,e.forwardRef)((xe=t=>{const n=t.target.parentNode,{masonryRef:o,feedListItems:l,feedSettings:a,className:r,userProfile:i}=t,{currentFeedIndex:c,setCurrentFeedIndex:d}=m(),{setIsOpen:u}=m(),_=!!a?.modal?.display,p=!_;return(0,e.createElement)(e.Fragment,null,(0,e.createElement)("div",{ref:o,className:s()("tiktok-feed-list",r),"data-feed_layout":a.layout},l.map((t,n)=>{const o=l.length;return(0,e.createElement)(I,{key:t.id,index:n,length:o,feedItem:t,feedSettings:a,onClick:()=>{d(n),u(!0)},isLink:p})})),_&&(0,e.createPortal)((0,e.createElement)(Ee,{userProfile:i,feedSettings:a,currentFeedIndex:c,feedListItems:l}),n))},(t,n)=>{const{feedSettings:o}=t,l=o.responsive||{desktop:{columns:o.columns||3,spacing:o.spacing||10},tablet:{columns:2,spacing:8},mobile:{columns:1,spacing:6},breakpoints:{tablet:768,mobile:480}},r=l.breakpoints?.tablet||768,i=l.breakpoints?.mobile||480,s=!!o.box?.display,c=!!o.card?.display,d="carousel"===o.layout||"carousel-vertical"===o.layout,u=!!o.mask?.display,_=!!o.button?.display,m=!!o.button_load?.display,p=`tiktok-feed-feed-${o.id}`,f=`tiktok-feed-modal-${o.id}`;return(0,e.createElement)(e.Fragment,null,(0,e.createElement)("style",null,`\n\t\t\t\t\t#${f} {\n\t\t\t\t\t\t${ye("--qligg-modal-text-align",o.modal?.text_align||"left")}\n\t\t\t\t\t\t${ye("--qligg-modal-font-size",o.modal?.font_size||14,"px")}\n\t\t\t\t\t\t--qligg-modal-body-height: 75vh;\n\t\t\t\t\t\t--qligg-modal-body-width: 75vw;\n\t\t\t\t\t\t--qligg-modal-sidebar-width: 360px;\n\t\t\t\t\t\t--qligg-modal-button-size: 40px;\n\t\t\t\t\t\t--qligg-modal-comments-height: 400px;\n\t\t\t\t\t\t--qligg-modal-border-color: #eeeeee;\n\t\t\t\t\t\t--qligg-modal-border-color-dark: #dddddd;\n\t\t\t\t\t\t--qligg-modal-button-border: #efefef;\n\t\t\t\t\t\t--qligg-modal-button-hover: #fafafa;\n\t\t\t\t\t\t--qligg-modal-error-color: #e74c3c;\n\t\t\t\t\t}\n\t\t\t\t`),(0,e.createElement)("style",null,`\n\t\t\t\t\t\t#${p} {\n\t\t\t\t\t\t\t--qligg-columns: ${l.desktop?.columns||3};\n\t\t\t\t\t\t\t--qligg-spacing: ${l.desktop?.spacing||10}px;\n\t\t\t\t\t\t\t--qligg-item-width: calc(100% / var(--qligg-columns));\n\t\t\t\t\t\t\t${s?ye("--qligg-box-bg",o.box.background):""}\n\t\t\t\t\t\t\t${s?ye("--qligg-box-color",o.box.text_color):""}\n\t\t\t\t\t\t\t${s?ye("--qligg-box-radius",o.box.radius,"px"):""}\n\t\t\t\t\t\t\t${s?ye("--qligg-box-padding",o.box.padding,"px"):""}\n\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t/* Feed card settings */\n\t\t\t\t\t\t\t${c?ye("--qligg-card-bg",o.card.background):""}\n\t\t\t\t\t\t\t${c?ye("--qligg-card-bg-hover",o.card.background_hover):""}\n\t\t\t\t\t\t\t${c?ye("--qligg-card-color",o.card.text_color):""}\n\t\t\t\t\t\t\t${c?ye("--qligg-card-font-size",o.card.font_size,"px"):""}\n\t\t\t\t\t\t\t${c?ye("--qligg-card-padding",o.card.padding,"px"):""}\n\t\t\t\t\t\t\t${c?ye("--qligg-card-radius",o.card.radius,"px"):""}\n\t\t\t\t\t\t\t${c&&o.card.boxed?ye("--qligg-card-boxed","1px solid #f5f5f5"):""}\n\t\t\t\t\t\t\t${c&&o.card.boxed?ye("--qligg-card-shadow","0 1px 3px rgba(0,0,0,0.05)"):""}\n\t\t\t\t\t\t\t${c&&o.card.boxed?ye("--qligg-card-shadow-hover","0 3px 10px rgba(0,0,0,0.06)"):""}\n\t\t\t\t\t\t\t${c?ye("--qligg-card-text-align",o.card.text_align||"left"):""}\n\t\t\t\t\t\t\t${u?ye("--qligg-mask-bg",o.mask.background):""}\n\t\t\t\t\t\t\t${u?ye("--qligg-mask-icon-color",o.mask.icon_color||"#ffffff"):""}\n\t\t\t\t\t\t\t${d?ye("--qligg-carousel-arrow-color",o.carousel.navarrows_color):""}\n\t\t\t\t\t\t\t${d?ye("--qligg-carousel-pagination-color",o.carousel.pagination_color):""}\n\t\t\t\t\t\t\t${_?ye("--qligg-button-color",o.button.text_color):""}\n\t\t\t\t\t\t\t${_?ye("--qligg-button-bg",o.button.background):""}\n\t\t\t\t\t\t\t${_?ye("--qligg-button-bg-hover",o.button.background_hover):""}\n\t\t\t\t\t\t\t${m?ye("--qligg-load-button-color",o.button_load.text_color):""}\n\t\t\t\t\t\t\t${m?ye("--qligg-load-button-bg",o.button_load.background):""}\n\t\t\t\t\t\t\t${m?ye("--qligg-load-button-bg-hover",o.button_load.background_hover):""}\n\t\t\t\t\t\t}\n\t\t\t\t\t`),(0,e.createElement)("style",null,`\n\t\t\t\t\t\t@media (max-width: ${r}px) {\n\t\t\t\t\t\t\t#${p} {\n\t\t\t\t\t\t\t\t--qligg-columns: ${l.tablet?.columns||2};\n\t\t\t\t\t\t\t\t--qligg-spacing: ${l.tablet?.spacing||8}px;\n\t\t\t\t\t\t\t\t--qligg-mask-icon-size: 26px;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t#${f} {\n\t\t\t\t\t\t\t\t--qligg-modal-body-height: 80vh;\n\t\t\t\t\t\t\t\t--qligg-modal-body-width: 80vw;\n\t\t\t\t\t\t\t\t--qligg-modal-sidebar-width: 100%;\n\t\t\t\t\t\t\t\t--qligg-modal-button-size: 36px;\n\t\t\t\t\t\t\t\t--qligg-modal-comments-height: 250px;\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t#${f} .tiktok-feed-modal__body {\n\t\t\t\t\t\t\t\tflex-direction: column;\n\t\t\t\t\t\t\t\toverflow-x: hidden;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t#${f} .tiktok-feed-modal__media-sidebar {\n\t\t\t\t\t\t\t\tmax-height: 40vh;\n\t\t\t\t\t\t\t\tborder-left: none;\n\t\t\t\t\t\t\t\tborder-top: 1px solid #f5f5f5;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t#${f} .tiktok-feed-modal__media-container {\n\t\t\t\t\t\t\t\twidth: 100%;\n\t\t\t\t\t\t\t\toverflow: visible;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t#${f} .tiktok-feed-modal__button-close:before, \n\t\t\t\t\t\t\t#${f} .tiktok-feed-modal__button-close:after {\n\t\t\t\t\t\t\t\twidth: 18px;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\n\t\t\t\t\t`),(0,e.createElement)("style",null,`\n\t\t\t\t\t\t@media (max-width: ${i}px) {\n\t\t\t\t\t\t\t#${p} {\n\t\t\t\t\t\t\t\t--qligg-columns: ${l.mobile?.columns||1};\n\t\t\t\t\t\t\t\t--qligg-spacing: ${l.mobile?.spacing||6}px;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t#${f} {\n\t\t\t\t\t\t\t\t--qligg-modal-body-height: 85vh;\n\t\t\t\t\t\t\t\t--qligg-modal-body-width: 90vw;\n\t\t\t\t\t\t\t\t--qligg-modal-sidebar-width: 100%;\n\t\t\t\t\t\t\t\t--qligg-modal-button-size: 32px;\n\t\t\t\t\t\t\t\t--qligg-modal-comments-height: 200px;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t#${f} .tiktok-feed-modal__button-arrow {\n\t\t\t\t\t\t\t\tposition: relative;\n\t\t\t\t\t\t\t\tfont-size: 1rem;\n\t\t\t\t\t\t\t\ttop: auto;\n\t\t\t\t\t\t\t\tleft: auto;\n\t\t\t\t\t\t\t\tright: auto;\n\t\t\t\t\t\t\t\tbottom: auto;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t`),(0,e.createElement)(xe,a({},t,{forwardRef:n})))}));var xe;const Ne=t=>{const{target:n,userMediaList:o,feedSettings:l,calculateWidth:r}=t,[i,s]=(0,e.useState)(!0),c=(0,e.useRef)(null),d=(0,e.useRef)(null),u=(0,e.useRef)(new Set),_=(0,e.useRef)(0),m=(0,e.useCallback)(()=>{d.current&&clearTimeout(d.current),d.current=setTimeout(()=>{c.current&&c.current.layout()},100)},[]),p=(0,e.useCallback)(e=>{u.current.add(e),m(),u.current.size>=_.current&&_.current>0&&(s(!1),n.classList.add("loaded"))},[m,n]),f=q(e=>{const{ownerDocument:t}=e,{defaultView:o}=t;if(!o.Masonry)return;const a={itemSelector:".tiktok-feed-item",isResizable:!0,isAnimated:!1,transitionDuration:0,percentPosition:!0,gutter:l?.spacing||0};a.columnWidth=r&&"function"==typeof r?r(e,l):".tiktok-feed-item";const i=new o.Masonry(e,a);c.current=i;const f=e.querySelectorAll(".tiktok-feed-item__video");_.current=f.length,u.current.clear(),f.forEach((e,t)=>{const n=`media-${t}`,o=()=>{p(n),e.removeEventListener("load",o),e.removeEventListener("loadeddata",o),e.removeEventListener("canplay",o),e.removeEventListener("error",o)};"IMG"===e.tagName?e.complete&&0!==e.naturalWidth?p(n):(e.addEventListener("load",o),e.addEventListener("error",o)):"VIDEO"===e.tagName&&(e.readyState>=3?p(n):(e.addEventListener("loadeddata",o),e.addEventListener("canplay",o),e.addEventListener("error",o)))}),0===_.current&&(s(!1),n.classList.add("loaded"));const k=new o.MutationObserver(e=>{let t=!1;e.forEach(e=>{"childList"===e.type&&e.addedNodes.length>0&&(t=!0)}),t&&m()}),g=e.querySelector(".tiktok-feed-item__wrap")||e;return k.observe(g,{childList:!0,subtree:!0}),setTimeout(()=>{i.layout()},50),()=>{d.current&&clearTimeout(d.current),k.disconnect(),i.destroy(),c.current=null}},[o,p,m,n,r,l]);return(0,e.createElement)(Ce,a({},t,{masonryRef:f}))},Se=t=>{const{userMediaList:n,feedSettings:o}=t,{setCurrentFeedIndex:l}=m(),{setIsOpen:r}=m(),i=(0,e.useCallback)(e=>{if(e){const{defaultView:t}=document;if(!t.Swiper)return;new t.Swiper(e,{slideClass:"tiktok-feed-item",loop:!0,loopedSlidesLimit:!1,centeredSlides:o.carousel.centered_slides,allowTouchMove:!1,slidesPerView:o?.responsive?.desktop?.columns||o.carousel?.slidespv||o.columns||3,spaceBetween:o?.responsive?.desktop?.spacing||o.video.spacing||10,autoplay:o.carousel.autoplay&&{delay:o.carousel.autoplay_interval},pagination:{el:e.querySelector(".swiper-pagination"),dynamicBullets:!0,clickable:!0,type:"bullets"},navigation:{nextEl:e.querySelector(".swiper-button-next"),prevEl:e.querySelector(".swiper-button-prev")},breakpoints:{0:{slidesPerView:o?.responsive?.mobile?.columns||1,spaceBetween:o?.responsive?.mobile?.spacing||6},[o?.responsive?.breakpoints?.mobile||480]:{slidesPerView:o?.responsive?.tablet?.columns||2,spaceBetween:o?.responsive?.tablet?.spacing||8},[o?.responsive?.breakpoints?.tablet||768]:{slidesPerView:o?.responsive?.desktop?.columns||o.columns||3,spaceBetween:o?.responsive?.desktop?.spacing||o.video.spacing||10}}});const n=()=>{e.addEventListener("click",e=>{(e.target.classList.contains(".swiper-slide-duplicate")||e.target.closest(".swiper-slide-duplicate"))&&(r(!0),l(Number(e.target.closest(".swiper-slide-duplicate").dataset.feedItemIndex)))})};n()}},[n,o]);return(0,e.createElement)("div",{ref:i,className:"swiper-container"},(0,e.createElement)(Ce,a({className:"swiper-wrapper tiktok-feed-square"},t)),o.carousel.pagination&&(0,e.createElement)("div",{className:"swiper-pagination"}),o.carousel.navarrows&&(0,e.createElement)(e.Fragment,null,(0,e.createElement)("div",{tabIndex:"1",className:"swiper-button-prev"}),(0,e.createElement)("div",{tabIndex:"1",className:"swiper-button-next"})))},Le=t=>{const n=(0,e.useRef)();return(0,e.createElement)(Ce,a({ref:n,className:"tiktok-feed-square"},t))},Te=t=>{const{feedListItems:n,feedSettings:o}=t;return(0,e.createElement)(Ne,a({},t,{userMediaList:n,feedSettings:o}))},Ie=t=>{const{feedSettings:n}=t,{layout:o}=n;switch(o){case"masonry":return(0,e.createElement)(Ne,t);case"carousel":case"carousel-vertical":return(0,e.createElement)(Se,t);case"highlight":case"highlight-square":return(0,e.createElement)(Te,t);default:return(0,e.createElement)(Le,t)}};async function qe({url:e,data:t,method:n}){return await fetch(e,{body:JSON.stringify(t),method:n}).then(e=>e.json()).then(e=>{if(e.code)throw new Error(`${e.code}: ${e?.message||"Unknown"}`);return e}).catch(e=>{throw new Error(e)})}const Pe=t=>{const{target:n,feedSettings:o}=t,{isLoadingUserProfile:l,feedProfile:a,errorUserProfile:r,isLoadingUserVideoList:i,isLoadingMore:s,feedListItems:c,errorUserVideoList:d,setCreateTime:u}=(t=>{const[n,o]=(0,e.useState)(!0),[l,a]=(0,e.useState)(!0),[r,i]=(0,e.useState)(!1),[s,c]=(0,e.useState)(null),[d,u]=(0,e.useState)([]),[_,m]=(0,e.useState)(null),[p,f]=(0,e.useState)(null),[k,g]=(0,e.useState)(null),{source:h,limit:b,order_by:v,username:w,open_id:E,hashtag:y,region:C}=t;return(0,e.useEffect)(()=>{f(null),g(null),c(null),u([]),m(null),o(!0),a(!0)},[h,w,E,y,C]),(0,e.useEffect)(()=>{(async()=>{i(!0);let e={};try{e=await async function(e){const{source:t}=e;if("account"!==t&&"username"!==t)return;const n=qlttf_frontend.restRoutePaths.profile?.[t];return await qe({url:n,method:"POST",data:{feedSettings:e}})}(t),c(e),o(!1)}catch(e){o(!1),f(e)}try{const n=await async function(e,t=""){const{source:n}=e,o=window?.qlttf_frontend?.restRoutePaths?.[n];if(!o)throw new Error(`Unknown source: ${n}`);return await qe({url:o,method:"POST",data:{feedSettings:e,createTime:t}})}({...t,username:["account","username"].includes(h)?e.username:""},_);u(null===_?n:[...d,...n]),a(!1),i(!1)}catch(e){a(!1),i(!1),console.error(e),g(e)}})()},[b,v,w,E,h,y,C,_]),{isLoadingUserProfile:n,feedProfile:s,errorUserProfile:p,isLoadingUserVideoList:l,isLoadingMore:r,feedListItems:d,errorUserVideoList:k,setCreateTime:m}})(o),_=l||i,m=r||d,p=["account","username"].includes(o.source)?a:o.profile;return(0,e.useEffect)(()=>{_||n.classList.add("loaded")},[_]),_?(0,e.createElement)(E,null):m?(0,e.createElement)(y,{errorUserProfile:r,errorUserVideoList:d}):(0,e.createElement)(e.Fragment,null,!!o?.profile?.display&&(0,e.createElement)(C,{feedSettings:o,userProfile:p}),(0,e.createElement)(Ie,{target:n,feedSettings:o,feedListItems:c,userProfile:p}),s&&(0,e.createElement)(E,null),(0,e.createElement)(w,{userProfile:p,feedSettings:o,onClick:e=>{e.preventDefault(),u(c[c.length-1]?.create_time)},createTime:c[c.length-1]?.create_time}))},De=t=>{const{attributes:n,setAttributes:o}=t,a=(0,e.useRef)(null),[r,i]=(0,e.useState)(!1),[s,c]=(0,e.useState)("desktop"),u=(0,l.useBlockProps)({className:"qlttf-box-editor"}),_=(0,d.useInstanceId)(De,"qlttf");return(0,e.useEffect)(()=>{o({id:_})},[_,o]),(0,e.useEffect)(()=>{a.current&&!r&&i(!0)},[a.current]),(0,e.useEffect)(()=>{const e=()=>{const e=document.querySelector(".edit-post-visual-editor");e&&(e.classList.contains("is-mobile-preview")?c("mobile"):e.classList.contains("is-tablet-preview")?c("tablet"):c("desktop"))};e();const t=document.querySelector(".edit-post-visual-editor");if(t){const n=new MutationObserver(e);return n.observe(t,{attributes:!0,attributeFilter:["class"]}),()=>n.disconnect()}},[]),(0,e.createElement)("div",u,(0,e.createElement)("div",{className:"tiktok-feed-feed",ref:a,id:`tiktok-feed-feed-${_}`,"data-view-mode":s},r&&(0,e.createElement)(f,null,(0,e.createElement)(Pe,{target:a.current,feedSettings:n}))))},Me=(0,e.forwardRef)(De),Fe=t=>{const{href:n,target:o="_self",title:l,children:a,className:r}=t;return(0,e.createElement)("a",{href:n,className:s()("tiktok__account-button",r),target:o,title:l},a)},Ae=n=>(0,e.createElement)(c.Placeholder,{label:(0,t.__)("Please create access token","wp-tiktok-feed"),instructions:(0,e.createElement)(e.Fragment,null,(0,e.createElement)("p",null,(0,t.__)("Before you start creating feeds, you have to create an access token. Please go to the account tab to connect your Instagram account and then reload this page.","wp-tiktok-feed")),(0,e.createElement)("p",null,(0,e.createElement)(Fe,{href:qlttf_gutenberg.access_token_link,target:"_blank",title:(0,t.__)("Add Account","wp-tiktok-feed")},(0,t.__)("Add Personal Account","wp-tiktok-feed"))))}),$e=({attributes:n,setAttributes:o,accounts:l})=>(0,e.createElement)(c.Placeholder,{label:(0,t.__)("Please select account","wp-tiktok-feed"),instructions:(0,t.__)("Before you start creating feeds, you have to select your Instagram account.","wp-tiktok-feed")},(0,e.createElement)("p",null,(0,e.createElement)(c.RadioControl,{selected:n.open_id,onChange:e=>o({open_id:e}),options:l?.map(e=>({value:e.open_id,label:e.nickname||e.username}))}))),{U:Be}={U:"qlttf/box"};(0,o.registerBlockType)(Be,{title:(0,t.__)("Tiktok Feed","wp-tiktok-feed"),description:(0,t.__)("Display beautiful and responsive galleries on your website from your Tiktok feed account.","wp-tiktok-feed"),icon:"awards",keywords:[(0,t.__)("qltff","wp-tiktok-feed"),(0,t.__)("instagram","wp-tiktok-feed"),(0,t.__)("quadlayers","wp-tiktok-feed")],edit:n=>{const{attributes:o}=n,{accounts:l,hasResolvedAccounts:i}=(0,r.useAccountsEntities)();return i?l&&0!==l.length?l?.find(e=>e.open_id===o.open_id)?(0,e.createElement)(e.Fragment,null,(0,e.createElement)(u,n),(0,e.createElement)(Me,n)):(0,e.createElement)($e,a({},n,{accounts:l})):(0,e.createElement)(Ae,n):(0,e.createElement)("p",null,(0,e.createElement)("span",{style:{visibility:"visible"},className:"spinner"}),(0,t.__)("Loading…","wp-tiktok-feed"))},save:t=>(0,e.createElement)(l.InnerBlocks.Content,null)})})()})();